"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var action_1 = require("../actions/action");
exports.markerReducer = function (state, action) {
    if (state === void 0) { state = []; }
    switch (action.type) {
        case action_1.MARKER_RENEW:
            return state = action.payload;
        case action_1.MARKER_ADD:
            return state.concat([action.payload]);
        case action_1.MARKER_REMOVE:
            return state.filter(function (marker) { return marker.id !== action.payload; });
        case action_1.MARKER_LEAVE:
            return state.map(function (marker) {
                if (marker.id !== action.payload.id) {
                    return marker;
                }
                return Object.assign({}, marker, action.payload);
            });
        case action_1.MARKER_JOIN:
            return state.map(function (marker) {
                if (marker.id !== action.payload.joinId) {
                    return marker;
                }
                return Object.assign({}, marker, action.payload.event);
            });
        default:
            return state;
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFya2VyUmVkdWNlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIm1hcmtlclJlZHVjZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFFQSw0Q0FNMkI7QUFHZCxRQUFBLGFBQWEsR0FBdUIsVUFBQyxLQUFVLEVBQzFELE1BQWM7SUFEa0Msc0JBQUEsRUFBQSxVQUFVO0lBRXhELE1BQU0sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ2xCLEtBQUsscUJBQVk7WUFDYixNQUFNLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUM7UUFDbEMsS0FBSyxtQkFBVTtZQUNYLE1BQU0sQ0FBSyxLQUFLLFNBQUUsTUFBTSxDQUFDLE9BQU8sR0FBRTtRQUN0QyxLQUFLLHNCQUFhO1lBQ2QsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsVUFBQSxNQUFNLElBQUksT0FBQSxNQUFNLENBQUMsRUFBRSxLQUFLLE1BQU0sQ0FBQyxPQUFPLEVBQTVCLENBQTRCLENBQUMsQ0FBQztRQUNoRSxLQUFLLHFCQUFZO1lBQ2IsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsVUFBQSxNQUFNO2dCQUNuQixFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsRUFBRSxLQUFLLE1BQU0sQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztvQkFDbEMsTUFBTSxDQUFDLE1BQU0sQ0FBQztnQkFDbEIsQ0FBQztnQkFDRCxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsTUFBTSxFQUFFLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUNyRCxDQUFDLENBQUMsQ0FBQztRQUNQLEtBQUssb0JBQVc7WUFDWixNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxVQUFBLE1BQU07Z0JBQ25CLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEtBQUssTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO29CQUN0QyxNQUFNLENBQUMsTUFBTSxDQUFDO2dCQUNsQixDQUFDO2dCQUNELE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxNQUFNLEVBQUUsTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUMzRCxDQUFDLENBQUMsQ0FBQztRQUNQO1lBQ0ksTUFBTSxDQUFDLEtBQUssQ0FBQztJQUNyQixDQUFDO0FBQ0wsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHttYXJrZXJ9IGZyb20gJy4uL2NvbXBvbmVudHMvaW50ZXJmYWNlL21hcmtlcic7XHJcbmltcG9ydCB7IEFjdGlvblJlZHVjZXIsIEFjdGlvbiB9IGZyb20gJ0BuZ3J4L3N0b3JlJztcclxuaW1wb3J0IHtcclxuICAgIE1BUktFUl9SRU5FVyxcclxuICAgIE1BUktFUl9BREQsXHJcbiAgICBNQVJLRVJfUkVNT1ZFLFxyXG4gICAgTUFSS0VSX0xFQVZFLFxyXG4gICAgTUFSS0VSX0pPSU5cclxufSBmcm9tICcuLi9hY3Rpb25zL2FjdGlvbic7XHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IG1hcmtlclJlZHVjZXI6IEFjdGlvblJlZHVjZXI8YW55PiA9IChzdGF0ZSA9IFtdXHJcbiwgYWN0aW9uOiBBY3Rpb24pID0+IHtcclxuICAgIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcclxuICAgICAgICBjYXNlIE1BUktFUl9SRU5FVzpcclxuICAgICAgICAgICAgcmV0dXJuIHN0YXRlID0gYWN0aW9uLnBheWxvYWQ7XHJcbiAgICAgICAgY2FzZSBNQVJLRVJfQUREOlxyXG4gICAgICAgICAgICByZXR1cm4gWy4uLnN0YXRlLCBhY3Rpb24ucGF5bG9hZF07XHJcbiAgICAgICAgY2FzZSBNQVJLRVJfUkVNT1ZFOlxyXG4gICAgICAgICAgICByZXR1cm4gc3RhdGUuZmlsdGVyKG1hcmtlciA9PiBtYXJrZXIuaWQgIT09IGFjdGlvbi5wYXlsb2FkKTtcclxuICAgICAgICBjYXNlIE1BUktFUl9MRUFWRTpcclxuICAgICAgICAgICAgcmV0dXJuIHN0YXRlLm1hcChtYXJrZXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKG1hcmtlci5pZCAhPT0gYWN0aW9uLnBheWxvYWQuaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWFya2VyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIG1hcmtlciwgYWN0aW9uLnBheWxvYWQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICBjYXNlIE1BUktFUl9KT0lOOlxyXG4gICAgICAgICAgICByZXR1cm4gc3RhdGUubWFwKG1hcmtlciA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAobWFya2VyLmlkICE9PSBhY3Rpb24ucGF5bG9hZC5qb2luSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWFya2VyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIG1hcmtlciwgYWN0aW9uLnBheWxvYWQuZXZlbnQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gc3RhdGU7XHJcbiAgICB9XHJcbn07XHJcblxyXG4iXX0=